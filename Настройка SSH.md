Настройка SSH
=============

Содержание
----------
1. [Краткие сведения](##_1._Краткие_сведения)
2. [Установка `sshd` на сервере и настройка `firewall`](##_2._Установка)
3. Установка клиента `ssh` под Windows
4. Генерация ключей на клиенте
5. Передача ключей на сервер
6. Дополнительные изменения в `sshd_config`
   

## 1. Краткие сведения

`ssh` обеспечивает безопасное соединение с сервером, используя шифрованный канал. Протокол обеспечивает неуязвимость к аттакам вида [человек посередине](https://ru.wikipedia.org/wiki/Человек_посередине), и является одним из самых полезных инструментов в арсенале DevOps, который необходимо настроить с самого начала.

Часто используемые команды из семейства `ssh`:

`ssh user@server.addr`

где `user` - логин пользователя _на сервере_ (не на локальной машине, они могут и не совпадать), `server.addr` — адрес сервера, задаётся либо в ip-формате, либо в форме `DNS` (если он настроен). Порт по умолчанию - 22.

>ВНИМАНИЕ!!! Никогда не логиньтесь пользователем `root`. При правильной настройке сервер не должен позволять логининться суперпользователем из удалённой машины.

`ssh -p port user@server.addr`

соединение по порту `port` (если так сконфигурирован `sshd` для большей защищённости)

`ssh user@server.addr /absolute/way/to/script`

позволяет удалённо запустить скрипт или программу, не заходя в терминал (как будто зашёл - выполнил - вышел). Скрипт (и путь к нему) должен быть доступен для `user` и иметь установленный флаг `u+x` (либо тогда запустить его через `/bin/sh /way/to/script`). Эта команда позволит, например, запускать какие-то автоматизированные действия при деплое приложения. Из локальной среды в скрипт можно передавать какие-то данные с помощью `pipe`.

`scp user@server.addr my-local-file user@server.addr:way/from/home/dir`
передача файла с локальной машины на сервер по указанному пути. Обратная передача тоже возможна:

`scp user@server.addr user@server.addr:way/from/home/dir my-local-file`

Таким образом можно скачать себе бекапы (для тех, кто из делает).

## 2. Установка `sshd` на сервере и настройка `firewall`

